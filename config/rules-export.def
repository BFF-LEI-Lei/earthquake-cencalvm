# -*- Makefile -*-
#
# ======================================================================
#
#                           Brad T. Aagaard
#                        U.S. Geological Survey
#
# {LicenseText}
#
# ======================================================================
#

$(EXPORT_ROOT):
	$(MKDIR) $(MKPARENTS) $(EXPORT_ROOT)

$(EXPORT_INCDIR):
	$(MKDIR) $(MKPARENTS) $(EXPORT_INCDIR)

$(EXPORT_LIBDIR):
	$(MKDIR) $(MKPARENTS) $(EXPORT_LIBDIR)

$(EXPORT_BINDIR):
	$(MKDIR) $(MKPARENTS) $(EXPORT_BINDIR)

#---------------------------------------------------------------------------
#
# Export targets make stuff available for other local packages
# or for dynamic loading, while release targets make things
# visible to third-party software packages
#

export:: $(EXPORT_ROOT)

# Add proper directory prefix to export header filenames

EXPORTED_HEADERS = ${addprefix ${PROJ_INCDIR}/, ${EXPORT_HEADERS}}
EXPORTED_PKG_HEADERS = ${addprefix ${PROJ_INCDIR}/${PACKAGE}/, ${EXPORT_HEADERS}}

# Create dependencies between exported header files and originals

$(PROJ_INCDIR)/%.$(EXT_CHH): %.$(EXT_CHH)
	-$(CP_F) $< $(PROJ_INCDIR)

$(PROJ_INCDIR)/$(PACKAGE)/%.$(EXT_CHH): %.$(EXT_CHH)
	-$(CP_F) $< $(PROJ_INCDIR)/$(PACKAGE)

$(PROJ_INCDIR)/%.$(EXT_CXX): %.$(EXT_CXX)
	-$(CP_F) $< $(PROJ_INCDIR)

$(PROJ_INCDIR)/$(PACKAGE)/%.$(EXT_CXX): %.$(EXT_CXX)
	-$(CP_F) $< $(PROJ_INCDIR)/$(PACKAGE)

$(PROJ_INCDIR)/%.$(EXT_ICC): %.$(EXT_ICC)
	-$(CP_F) $< $(PROJ_INCDIR)

$(PROJ_INCDIR)/$(PACKAGE)/%.$(EXT_ICC): %.$(EXT_ICC)
	-$(CP_F) $< $(PROJ_INCDIR)/$(PACKAGE)

# Place headers in project-specific build include dir
export-headers:: $(PROJ_INCDIR) $(EXPORTED_HEADERS)
	-$(CHMOD) -R +w $(PROJ_INCDIR)/*

# Place headers in package-specific subdir of project include dir
export-package-headers:: export-package-dir $(EXPORTED_PKG_HEADERS)
	-$(CHMOD) -R +w $(PROJ_INCDIR)/$(PACKAGE)/*

export-package-dir::
	-$(MKDIR) $(MKPARENTS) $(PROJ_INCDIR)/$(PACKAGE)

# version
# $Id$

# End of file 
