# -*- Makefile -*-
#
# ======================================================================
#
#                           Brad T. Aagaard
#                        U.S. Geological Survey
#
# {LicenseText}
#
# ======================================================================
#

$(PROJ_TMPDIR)/%.$(EXT_OBJ): %.$(EXT_CXX)
	@$(RM_F) $@
	$(COMPILER_CXX_DEPENDS) $(CXXFLAGS) $(CXX_INSTFLAGS) -c -o $@ $<
	@if [ -f $@.$(EXT_DEPEND) ] ; then \
	  $(MV) $@.$(EXT_DEPEND) $*.$(EXT_DEPEND) ; \
	fi ; \
	if [ -f $*.$(EXT_DEPEND) ] ; then /bin/true ; else \
	  $(MV) $(PROJ_TMPDIR)/$*.$(EXT_DEPEND) $*.$(EXT_DEPEND) ; \
	fi ; \
	sed -e 's?^[^/].*:?$(PROJ_TMPDIR)/&?' < $*.$(EXT_DEPEND) > \
	  $(PROJ_TMPDIR)/$*.$(EXT_DEPEND) ; \
	tr -s '[:space:]' '\n' < $*.$(EXT_DEPEND) > $*.tmp.$(EXT_DEPEND) ; \
	sed -e 's/^ *//' -e 's/#.*//' -e 's/^[^:]*: *//' \
	  -e 's/ *\\$$//' -e '/^$$/ d' -e 's/$$/ :/' < $*.tmp.$(EXT_DEPEND) \
	  >> $(PROJ_TMPDIR)/$*.$(EXT_DEPEND) ; \
	$(RM_F) $*.$(EXT_DEPEND) $*.tmp.$(EXT_DEPEND)

# version
# $Id$

# End of file 
